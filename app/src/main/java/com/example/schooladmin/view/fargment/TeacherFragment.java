package com.example.schooladmin.view.fargment;import android.content.BroadcastReceiver;import android.content.Context;import android.content.Intent;import android.content.IntentFilter;import android.os.Bundle;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.ImageView;import android.widget.ProgressBar;import androidx.annotation.NonNull;import androidx.fragment.app.Fragment;import androidx.recyclerview.widget.LinearLayoutManager;import androidx.recyclerview.widget.RecyclerView;import com.example.schooladmin.R;import com.example.schooladmin.connectdb.ConnectDB;import com.example.schooladmin.model.Teacher;import com.example.schooladmin.query.TeacherQuery;import com.example.schooladmin.view.adapter.TeacherRecyclerAdapter;import com.example.schooladmin.view.dialog.AddTeacherBottomSheet;import com.google.android.material.floatingactionbutton.FloatingActionButton;import java.util.ArrayList;import java.util.List;public class TeacherFragment extends Fragment {    private ConnectDB connectDB;    private ImageView imgFragmentTeacherEmpty;    private ProgressBar progressBarFragmentTeacherLoad;    private FloatingActionButton floatingActionFragmentTeacherAddTeacher;    private RecyclerView recyclerFragmentTeacher;    private RecyclerView.LayoutManager layoutManagerTeacher;    private List<Teacher> teachers;    private TeacherRecyclerAdapter teacherRecyclerAdapter;    private TeacherQuery teacherQuery;    private AddTeacherBottomSheet addTeacherBottomSheet;    public View onCreateView(@NonNull LayoutInflater inflater,                             ViewGroup container,                             Bundle savedInstanceState) {        View view = inflater.inflate( R.layout.fragment_teacher, container, false );        connectDB = new ConnectDB();        teacherQuery = new TeacherQuery( getContext() );        imgFragmentTeacherEmpty = view.findViewById( R.id.imgFragmentTeacherEmpty );        progressBarFragmentTeacherLoad = view.findViewById( R.id.progressBarFragmentTeacherLoad );        recyclerFragmentTeacher = view.findViewById( R.id.recyclerFragmentTeacher );        floatingActionFragmentTeacherAddTeacher = view.findViewById( R.id.floatingActionFragmentTeacherAddTeacher );        recyclerFragmentTeacher.setHasFixedSize( true );        layoutManagerTeacher = new LinearLayoutManager( getActivity(), RecyclerView.VERTICAL, false );        recyclerFragmentTeacher.setLayoutManager( layoutManagerTeacher );        teachers = new ArrayList<>();        teacherQuery.callTaskGetAllTeacher();        teacherRecyclerAdapter = new TeacherRecyclerAdapter( teachers, getActivity() );        recyclerFragmentTeacher.setAdapter( teacherRecyclerAdapter );        progressBarFragmentTeacherLoad.setVisibility( View.VISIBLE );        IntentFilter intentFilterTeacher = new IntentFilter( "teacherList" );        requireActivity().registerReceiver( broadcastReceiverAllTeacher, intentFilterTeacher );        floatingActionFragmentTeacherAddTeacher.setOnClickListener( new View.OnClickListener() {            @Override            public void onClick(View view) {                addTeacherBottomSheet = new AddTeacherBottomSheet();                addTeacherBottomSheet.show( getActivity().getSupportFragmentManager(), "AddTeacherBottomSheet" );            }        } );        return view;    }    //for get All Teacher    BroadcastReceiver broadcastReceiverAllTeacher = new BroadcastReceiver() {        @Override        public void onReceive(Context context, Intent intent) {            if (connectDB.CONN() == null) {                imgFragmentTeacherEmpty.setImageResource( R.drawable.ic_disconnect );                imgFragmentTeacherEmpty.setVisibility( View.VISIBLE );                progressBarFragmentTeacherLoad.setVisibility( View.GONE );                return;            }            teachers = teacherQuery.getAllTeacher();            if (teachers.size() == 0) {                imgFragmentTeacherEmpty.setVisibility( View.VISIBLE );            } else {                imgFragmentTeacherEmpty.setVisibility( View.GONE );            }            teacherRecyclerAdapter.setDate( teachers );            progressBarFragmentTeacherLoad.setVisibility( View.GONE );        }    };}